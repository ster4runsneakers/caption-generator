<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caption Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div class="container">
        <h1>AI Social Media Assistant</h1>
        <p>Συμπλήρωσε τις επιλογές για να δημιουργήσεις το τέλειο περιεχόμενο!</p>

        <input type="text" id="topic-input" placeholder="π.χ., ένα ηλιόλουστο πρωινό στην παραλία">

        <select id="platform-select">
            <option value="Instagram">Instagram</option>
            <option value="TikTok">TikTok</option>
            <option value="Facebook">Facebook</option>
            <option value="Pinterest">Pinterest</option>
            <option value="YouTube">YouTube</option>
        </select>
        
        <select id="content-type-select">
            <option value="Caption">Full Caption (3 επιλογές)</option>
            <option value="Hook">Μόνο Hook (3 επιλογές)</option>
            <option value="CTA">Μόνο CTA (3 επιλογές)</option>
        </select>

        <select id="tone-select">
            <option value="Friendly">Φιλικό</option>
            <option value="Professional">Επαγγελματικό</option>
            <option value="Funny">Αστείο</option>
            <option value="Enthusiastic">Ενθουσιώδες</option>
        </select>

        <button id="generate-btn">Δημιουργία Περιεχομένου</button>

        <pre id="caption-output">Το περιεχόμενό σου θα εμφανιστεί εδώ...</pre>
    </div>

    <script>
        // Παίρνουμε και το νέο select element
        const contentTypeSelect = document.getElementById('content-type-select');
        const topicInput = document.getElementById('topic-input');
        const platformSelect = document.getElementById('platform-select');
        const toneSelect = document.getElementById('tone-select');
        const generateBtn = document.getElementById('generate-btn');
        const captionOutput = document.getElementById('caption-output');

        generateBtn.addEventListener('click', () => {
            const topic = topicInput.value;
            const platform = platformSelect.value;
            const tone = toneSelect.value;
            // Παίρνουμε την τιμή και από το νέο dropdown
            const contentType = contentTypeSelect.value;

            if (!topic) {
                alert('Παρακαλώ, γράψε ένα θέμα!');
                return;
            }

            captionOutput.textContent = 'Δημιουργία...';

            fetch('/generate-caption', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                // Στέλνουμε όλες τις τιμές στο backend
                body: JSON.stringify({
                    topic: topic,
                    platform: platform,
                    tone: tone,
                    contentType: contentType 
                })
            })
            .then(response => response.json())
            .then(data => {
                captionOutput.textContent = data.caption || data.error;
            })
            .catch(error => {
                console.error('Error:', error);
                captionOutput.textContent = 'Παρουσιάστηκε σφάλμα. Δες την κονσόλα του browser.';
            });
        });
    </script>

</body>
</html>