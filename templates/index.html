<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caption Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div class="container">
        <h1>Δημιουργός Caption</h1>
        <p>Συμπλήρωσε τις επιλογές για να δημιουργήσεις το τέλειο caption!</p>

        <input type="text" id="topic-input" placeholder="π.χ., ένα ηλιόλουστο πρωινό στην παραλία">

        <select id="platform-select">
            <option value="Instagram">Instagram</option>
            <option value="TikTok">TikTok</option>
            <option value="Facebook">Facebook</option>
            <option value="YouTube">YouTube</option>
        </select>

        <select id="tone-select">
            <option value="Friendly">Φιλικό</option>
            <option value="Professional">Επαγγελματικό</option>
            <option value="Funny">Αστείο</option>
            <option value="Enthusiastic">Ενθουσιώδες</option>
        </select>

        <button id="generate-btn">Δημιουργία 3 Captions</button>

        <pre id="caption-output">Τα captions σου θα εμφανιστούν εδώ...</pre>
    </div>

    <script>
        const topicInput = document.getElementById('topic-input');
        const platformSelect = document.getElementById('platform-select');
        const toneSelect = document.getElementById('tone-select');
        const generateBtn = document.getElementById('generate-btn');
        const captionOutput = document.getElementById('caption-output');

        generateBtn.addEventListener('click', () => {
            const topic = topicInput.value;
            const platform = platformSelect.value;
            const tone = toneSelect.value;

            if (!topic) {
                alert('Παρακαλώ, γράψε ένα θέμα!');
                return;
            }

            captionOutput.textContent = 'Δημιουργία...';

            // The JavaScript doesn't need the full Render URL anymore.
            // It can just call the local API endpoint directly.
            fetch('/generate-caption', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    topic: topic,
                    platform: platform,
                    tone: tone
                })
            })
            .then(response => response.json())
            .then(data => {
                captionOutput.textContent = data.caption || data.error;
            })
            .catch(error => {
                console.error('Error:', error);
                captionOutput.textContent = 'Παρουσιάστηκε σφάλμα. Δες την κονσόλα του browser.';
            });
        });
    </script>

</body>
</html>